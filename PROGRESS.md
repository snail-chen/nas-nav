# 项目进度文档

## 2025-12-01

### 功能更新
- **用户管理系统 (User Management)**:
  - **多用户支持**: 新增 `useAuth` Hook，支持管理员 (Admin) 和普通用户 (User) 角色。
  - **用户管理面板**: 在设置中新增 "Users" 选项卡（仅管理员可见），支持添加新用户和删除现有用户。
  - **密码修改**: 在设置中新增 "Profile" 选项卡，支持所有用户修改自己的密码。
  - **权限隔离**: 限制普通用户无法使用右键菜单编辑/删除应用，也无法看到添加应用按钮和用户管理选项。

- **系统配置 (System Config)**:
  - **可配置标题**: 支持在设置的 "General" 选项卡中自定义网站标题 (Site Title)，并实时同步至登录页和顶部状态栏。
  - **基础 URL 配置**: 允许在设置中修改基础 IP/域名。

- **登录页优化 (Login Page)**:
  - **视觉升级**: 优化登录页 UI，增加动态背景流光效果和输入框交互动画。
  - **功能增强**: 新增用户名输入框，支持多用户登录验证。
  - **标题同步**: 登录页标题跟随系统配置动态展示。

## 2025-11-30

### 功能更新
- **登录与权限管理 (Auth System)**:
  - **炫酷科技感登录页**: 
    - 新增 `LoginPage` 组件，采用磨砂玻璃、Framer Motion 进场动画和科技感元素（动态锁图标、脉冲光效）。
    - 实现了基础的密码验证逻辑（默认密码 `admin`）。
  - **权限控制**:
    - 在 `App.tsx` 中集成 `isAuthenticated` 状态，实现全局路由守卫，未登录用户无法访问主界面。
    - 登录状态通过 `localStorage` 持久化。
  - **顶部菜单重构**:
    - 移除原有的 "File Edit View" 装饰性菜单。
    - 替换为实用的用户管理功能：
      - 显示当前用户 (Admin)。
      - 提供 **退出登录 (Logout)** 按钮，点击即可清除会话并返回登录页。

- **UI 细节优化**:
  - **图标填充**: 获取到的网站 Logo 现在会**完全填充**应用图标区域 (`object-cover`)，呈现出统一的圆角矩形效果。
  - **删除按钮位置**: 将 Hover 删除按钮从应用图标内部移至**左上角外部**，避免遮挡图标内容。

- **自动获取图标 (Auto Favicon)**:
  - 实现首次访问应用时自动探测目标网站 Logo 功能。
  - **触发机制**: 用户首次点击应用图标时，系统尝试加载目标地址的 `/favicon.ico`。
  - **智能回退**: 若获取成功则更新图标；若获取失败或图标失效，自动回退至默认的首字母样式。
  - **持久化**: 获取到的图标 URL 会自动保存至本地配置。

- **右键菜单 (Context Menu)**:
  - 实现应用图标右键菜单，支持**编辑**和**删除**操作。
  - 菜单具备点击外部自动关闭功能，且支持磨砂玻璃视觉效果。
  - 集成至主界面，替代原有的 Hover 删除按钮（保留 Hover 删除作为快捷方式，或根据需求移除，目前保留）。

- **通用模态框 (Link Modal)**:
  - 重构 `AddModal` 为通用的 `LinkModal`。
  - 支持**新增**和**编辑**两种模式：
    - 新增模式：标题为 "Add New Service"，按钮为 "Install App"。
    - 编辑模式：标题为 "Edit Service"，按钮为 "Save Changes"，自动回填应用名称和端口。

- **UI 亮色优化 (极光星云风格)**: 
  - 解决用户反馈“页面太暗”的问题，从深邃黑蓝调整为**明亮的极光渐变** (Violet / Indigo / Teal)。
  - **背景**: 使用 `Violet-900` -> `Indigo-900` -> `Teal-700` 的全屏渐变，并添加了混合模式 (`mix-blend-screen`) 让粒子更透亮。
  - **粒子**: 更新为更明亮的配色（白色、紫罗兰、亮粉、天蓝、青色）。
  - **Glassmorphism**: 调整所有磨砂玻璃组件（Dock、TopBar、Card）的背景为白色半透明 (`bg-white/10`)，替代之前的深色半透明，提升通透感。
  - **图标与文字**: 统一使用白色文字和图标，增加阴影以保证在亮色背景下的可读性。

- **UI 修复**:
  - **Dock 对齐**: 修复了 Dock 栏图标在默认状态下未垂直居中的问题。

### 历史更新
- **UI 重构**: 将整体风格调整为 macOS 16 桌面风格。
- **功能实现**: 导航链接的增删改查、本地存储持久化。

### 技术栈
- React + Vite
- Tailwind CSS
- Framer Motion (动画)
- Lucide React (图标)
